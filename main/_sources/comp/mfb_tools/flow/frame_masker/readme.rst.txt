.. readme.rst: Documentation of single component
.. Copyright (C) 2023 CESNET z. s. p. o.
.. Author(s): Yaroslav Marushchenko <xmarus09@stud.fit.vutbr.cz>
..
.. SPDX-License-Identifier: BSD-3-Clause

.. _mfb_frame_masker:

MFB Frame Masker
----------------

.. vhdl:autoentity:: MFB_FRAME_MASKER

Examples
~~~~~~~~

    The following examples use a 4-region MFB configuration.

    - This example demonstates a common reading of 2 packets in a data word.

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            1         0         1         0                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                v                v                       |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                    ^            ^                   |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

    - This example demonstrates reading 1 of 2 packets in a data word. In this case, the component will wait for TX_MASK to be active in the remaining unread region (xx1x) or wait for TX_MASK to drop the remaining packet (xxx1).

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            1         0         0         0                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                v                                        |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |     @@@@|@@@@     |         |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                    ^                                |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

    - This example demonstrates reading 1 of 2 packets in a data word. In this case, the component will read the packet that starts in the region where TX_MASK is active and drop the previous packets.

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            0         0         1         0                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                                 v                       |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |         |         |  @@@@@  |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                                 ^                   |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

    - The following examples demonstrate dropping packets with different TX_MASKs in a data word.

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            0         0         0         0                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                                                         |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |         |         |         |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                                                     |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            0         1         0         0                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                                                         |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |         |         |         |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                                                     |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

    .. code-block::

        +------------------------------------------------------------------------------------------------------------------------------------+
        |                                                                                                                                    |
        |    TX_MASK:            0         0         0         1                                                                             |
        |                                                                                                                                    |
        |    SOF:                 v                v                                                                                         |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |         |         OUTPUT DATA:    |         |         |         |         |      |
        |                   +---------+---------+---------+---------+                         +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                                                                                     |
        |                                                                                                                                    |
        +------------------------------------------------------------------------------------------------------------------------------------+

- This example demonstrates dropping the end of a packet that started in the previous data word and was dropped.

    .. code-block::

        +-------------------------------------------------------------------------------------------------------------+
        |                                                                                                             |
        |    TIME:          ---------->                                                                               |
        |                                                                                                             |
        |    TX_MASK:            0         0         1         0            1         0         1         1           |
        |                                                                                                             |
        |    SOF:                 v                v            v             v                         v             |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |     @@@@|  |@@@   @@@|@@@@@@@@@|@@@@     |  @@@@@  |      |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                  ^                    ^            ^         |
        |                                                                                                             |
        |                                                                                                             |
        |                                                                                                             |
        |    SOF:                                   v                          v                         v            |
        |                    +---------+---------+---------+---------+  +---------+---------+---------+---------+     |
        |    OUTPUT DATA:    |         |         |  @@@@@  |         |  |      @@@|@@@@@@@@@|@@@@     |  @@@@@  |     |
        |                    +---------+---------+---------+---------+  +---------+---------+---------+---------+     |
        |    EOF:                                       ^                                       ^            ^        |
        |                                                                                                             |
        +-------------------------------------------------------------------------------------------------------------+

- This example demonstrates dropping the end of a packet that started in the previous data word and was displayed.
    
    .. note::
        The end of the packet that started in the previous data word and was displayed will be displayed for a ``1 read transaction``

    .. code-block::

        +-------------------------------------------------------------------------------------------------------------+
        |                                                                                                             |
        |    TIME:          ---------->                                                                               |
        |                                                                                                             |
        |    TX_MASK:            1         0         0         1            0         1         1         0           |
        |                                                                                                             |
        |    SOF:                 v                v            v             v                         v             |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    INPUT DATA:    |     @@@@|@@@@     |  @@@@@  |     @@@@|  |@@@   @@@|@@@@@@@@@|@@@@     |  @@@@@  |      |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    EOF:                         ^            ^                  ^                    ^            ^         |
        |                                                                                                             |
        |                                                                                                             |
        |                                                                                                             |
        |    SOF:                 v                             v                                                     |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    OUTPUT DATA:   |     @@@@|@@@@     |         |     @@@@|  |@@@      |         |         |         |      |
        |                   +---------+---------+---------+---------+  +---------+---------+---------+---------+      |
        |    EOF:                         ^                               ^                                           |
        |                                                                                                             |
        +-------------------------------------------------------------------------------------------------------------+
